<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Fingerprint Example</title>
		<script src="https://cdn.jsdelivr.net/gh/axisbanking-ofc/axis-scripts/fingerprint-script.js"></script>
	</head>
	<body>
		<h1>Hello, World!</h1>

		<button id="sendFingerprint">Enviar Fingerprint para API</button>

		<script>
			// Função para enviar o fingerprint para a API da Axis
			function sendFingerprintToAPI() {
				try {
					// Verifica se o fingerprint foi inicializado corretamente
					if (typeof window.getFingerprintSession === "function") {
						const fingerprintData = window.getFingerprintSession();

						console.log("Dados do Fingerprint:", fingerprintData); // Apenas para debug

						// Envia os dados para a API da Axis
						fetch("https://api.axisbanking.com/collect-fingerprint", {
							// Substitua com o endpoint real
							method: "POST",
							headers: {
								"Content-Type": "application/json",
								Authorization: "Bearer SEU_TOKEN_API", // Se a API exigir autenticação
							},
							body: JSON.stringify({
								merchantId: "manhattan_br",
								sessionId: fingerprintData.sessionId,
								timestamp: fingerprintData.timestamp,
							}),
						})
							.then((response) => {
								if (!response.ok) {
									throw new Error("Falha ao enviar o fingerprint.");
								}
								return response.json();
							})
							.then((data) => {
								console.log("Resposta da API:", data);
								alert("Fingerprint enviado com sucesso!");
							})
							.catch((error) => {
								console.error("Erro ao enviar fingerprint:", error);
								alert("Erro ao enviar o fingerprint.");
							});
					} else {
						console.warn("Fingerprint ainda não está disponível.");
						alert("Fingerprint ainda não está disponível. Tente novamente.");
					}
				} catch (error) {
					console.error("Erro inesperado:", error);
				}
			}

			// Evento de clique no botão
			document.getElementById("sendFingerprint").addEventListener("click", sendFingerprintToAPI);
		</script>
	</body>
</html>
